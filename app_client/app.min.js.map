{"version":3,"sources":["app.min.js"],"names":["config","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","run","$rootScope","$location","authentication","$on","event","nextRoute","currentRoute","path","isLoggedIn","angular","module","designCtrl","$scope","DrawingService","meanData","$routeParams","vm","this","designId","currentEmail","currentUser","email","shareInfo","id","shapeType","drawingMode","isDown","startPosition","canvas","init","connectToSocket","console","log","fabric","Canvas","selection","setUpCanvas","getDesign","success","data","canvasDesign","design","loadFromJSON","renderAll","bind","designName","title","error","e","location","pathname","toString","pathArray","split","socket","io","query","on","msg","document","addEventListener","keyCode","getActiveObject","shapeToRemove","remove","keepSquare","saveCanvas","canvasJson","toJSON","canvasString","JSON","stringify","owner","saveDesign","emit","changeToRect","changeToEllipse","changeToTriangle","x","offsetX","y","offsetY","shape","createShape","add","deltaX","deltaY","setWidth","setHeight","setCoords","rx","Math","abs","ry","strokeWidth","set","originX","originY","getCenterPoint","radius","points","starPolygonPoints","get","length","boundingBox","getBoundingBox","width","height","top","getHeight","rotate","setActiveObject","type","observe","target","resizeToScale","openModal","$","css","closeModal","shareDesign","alert","Object","prototype","scaleX","scaleY","i","p","$inject","homeCtrl","profileCtrl","user","designs","sharedDesigns","getProfile","getDesigns","getSharedDesigns","logOut","logout","submitNewDesign","createDesign","loginCtrl","credentials","password","onSubmit","login","err","then","registerCtrl","name","register","ShapeService","drawingFactory","options","parentClass","createRect","createEllipse","createTriangle","factory","shapeFactory","rect","Rect","left","stroke","fill","ellipse","Ellipse","triangle","Triangle","$http","$window","saveToken","token","localStorage","getToken","removeItem","payload","atob","parse","exp","Date","now","post","service","headers","Authorization","params","navigationCtrl","navigation","restrict","directive"],"mappings":"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","file":"app.min.js","sourcesContent":["(function() {\r\n    angular.module('app', ['ngRoute']);\r\n    \r\n    function config($routeProvider, $locationProvider) {\r\n        $routeProvider\r\n            .when('/', {\r\n                  templateUrl: 'home/home.view.html',\r\n                  controller: 'homeCtrl',\r\n                  controllerAs: 'vm'\r\n                  \r\n            })\r\n            .when('/register', {\r\n                templateUrl: '/auth/register/register.view.html',\r\n                controller: 'registerCtrl',\r\n                controllerAs: 'vm'\r\n            })\r\n            .when('/login', {\r\n                templateUrl: '/auth/login/login.view.html',\r\n                controller:'loginCtrl',\r\n                controllerAs: 'vm'\r\n            })\r\n            .when('/profile', {\r\n                templateUrl: '/profile/profile.view.html',\r\n                controller:'profileCtrl',\r\n                controllerAs: 'vm'\r\n            })\r\n            .when('/design/:designId', {\r\n                templateUrl: '/design/design.view.html',\r\n                controller:'designCtrl',\r\n                controllerAs:'vm'\r\n            \r\n            })\r\n            .otherwise({redirectTo: '/'});\r\n        $locationProvider.html5Mode(true);\r\n    }\r\n    \r\n    function run($rootScope, $location, authentication) {\r\n        $rootScope.$on('$routeChangeStart', function(event, nextRoute, currentRoute) {\r\n            if( $location.path() === '/profile' && !authentication.isLoggedIn()) {\r\n                $location.path('/');\r\n            }\r\n        });\r\n    }\r\n    angular\r\n        .module('app')\r\n        .config(['$routeProvider', '$locationProvider', config])\r\n        .run(['$rootScope', '$location', 'authentication', run]);\r\n})();\n(function() {\r\n    angular\r\n        .module('app')\r\n        .controller('designCtrl', designCtrl); \r\n    \r\n    designCtrl.$inject = ['$location','$scope', 'DrawingService', 'meanData', 'authentication', '$routeParams'];\r\n    \r\n    function designCtrl($location, $scope, DrawingService, meanData, authentication, $routeParams) {\r\n        var vm = this;\r\n        vm.designId = $routeParams.designId;\r\n        vm.currentEmail = authentication.currentUser().email;\r\n        vm.shareInfo = {\r\n            id: $routeParams.designId,\r\n            email: ''\r\n        };\r\n        \r\n        vm.shapeType = 'rect';\r\n        vm.drawingMode = true;\r\n        vm.isDown = false;\r\n        vm.startPosition = {};\r\n//        $scope.FabricConstants = FabricConstants;\r\n        vm.canvas;\r\n        vm.init = function() {\r\n            vm.connectToSocket();\r\n            console.log('initializing fabric');\r\n            vm.canvas = new fabric.Canvas('c');\r\n            console.log(vm.canvas);\r\n            vm.canvas.selection = false;\r\n            vm.setUpCanvas();\r\n            meanData.getDesign(vm.designId)\r\n                .success(function(data) {\r\n                    vm.canvasDesign = data.design.design;\r\n                    vm.canvas.loadFromJSON(vm.canvasDesign.design, vm.canvas.renderAll.bind(vm.canvas));\r\n                    vm.designName = data.design.title;\r\n                    console.log(data);\r\n                })\r\n                .error(function(e) {\r\n                    console.log(e);\r\n                });  \r\n        };\r\n        vm.connectToSocket = function(){\r\n            console.log(location.pathname.toString());\r\n            var pathArray = location.pathname.split('/');\r\n            socket = io('/' + pathArray[1], {query: 'room=' + pathArray[2]});\r\n            \r\n            socket.on('updateGroup', function(msg) {\r\n                console.log(msg); \r\n            });\r\n            socket.on('designUpdate', function(design) {\r\n                vm.canvas.loadFromJSON(design, vm.canvas.renderAll.bind(vm.canvas));\r\n            }); \r\n        }\r\n        document.addEventListener('keydown', function(event) {\r\n            console.log('in key down');\r\n            switch (event.keyCode) {\r\n                case 46:\r\n                    if(vm.canvas.getActiveObject()) {\r\n                        console.log('trying to delete');\r\n                        var shapeToRemove = vm.canvas.getActiveObject();\r\n                        vm.canvas.remove(shapeToRemove);\r\n                        vm.canvas.remove(shapeToRemove);\r\n                        vm.canvas.renderAll();\r\n                        return;\r\n                    }\r\n                    break;\r\n                case 16:\r\n                    vm.keepSquare = true;\r\n                    break;\r\n            }\r\n        });\r\n        document.addEventListener('keyup', function(event) {\r\n            switch( event.keyCode) {\r\n                case 16: \r\n                    console.log('shift released');\r\n                    vm.keepSquare = false;\r\n                    break;\r\n            }\r\n        });\r\n        vm.saveCanvas = function() {\r\n            var canvasJson = vm.canvas.toJSON();\r\n            console.log(canvasJson);\r\n            var canvasString = JSON.stringify(canvasJson);\r\n//            meanData.getProfile().success(function(data) {\r\n//                console.log(data.email);\r\n//                vm.currentUser = data.email;\r\n//                console.log(vm.currentUser);\r\n//\r\n//            });\r\n            vm.currentEmail = authentication.currentUser().email;\r\n            console.log(vm.currentEmail);\r\n            vm.design = {\r\n                id: vm.designId,\r\n                owner: vm.currentEmail,\r\n                design: canvasString\r\n            }\r\n            meanData.saveDesign(vm.design)\r\n                .success(function(data) {\r\n                    console.log('about to call socket');\r\n                    socket.emit('updateDesign', canvasString);\r\n                })\r\n                .error(function(e) {\r\n                    console.log(e);\r\n                });\r\n        }\r\n        vm.changeToRect = function() {\r\n            vm.shapeType = 'rect';\r\n        };\r\n        vm.changeToEllipse = function() {\r\n            vm.shapeType = 'ellipse';\r\n        };\r\n        vm.changeToTriangle = function() {\r\n            vm.shapeType = 'triangle';\r\n        };\r\n        vm.setUpCanvas = function() {\r\n            vm.canvas.on('mouse:down', function(event) {\r\n                console.log(event);\r\n                if(!vm.drawingMode) return;\r\n                vm.isDown = true;\r\n                vm.startPosition.x = event.e.offsetX - 5;\r\n                vm.startPosition.y = event.e.offsetY - 5;\r\n                vm.shape = DrawingService.createShape({\r\n                    shapeType: vm.shapeType,\r\n                    startPosition: vm.startPosition\r\n                });\r\n                console.log(vm.shape);\r\n                vm.canvas.add(vm.shape);\r\n            });\r\n            vm.canvas.on('mouse:move', function(event) {\r\n                var deltaX, deltaY;\r\n                if(!vm.isDown || !vm.drawingMode) return;\r\n                switch(vm.shapeType) {\r\n                    case 'rect':\r\n                        if(vm.keepSquare) {\r\n                            deltaX = event.e.offsetX - vm.startPosition.x;\r\n                            deltaY = deltaX;\r\n                        } else {\r\n                            deltaX = event.e.offsetX - vm.startPosition.x;\r\n                            deltaY = event.e.offsetY - vm.startPosition.y;\r\n                        }\r\n\r\n                        vm.shape.setWidth(deltaX);\r\n                        vm.shape.setHeight(deltaY);\r\n                        vm.shape.setCoords();\r\n                        break;\r\n                    case 'ellipse':\r\n                        var rx = Math.abs(vm.startPosition.x - event.e.offsetX) / 2;\r\n                        var ry = Math.abs(vm.startPosition.y - event.e.offsetY) / 2;\r\n                        if( rx > vm.shape.strokeWidth) {\r\n                            rx -= vm.shape.strokeWidth / 2;\r\n                        }                \r\n                        if( ry > vm.shape.strokeWidth) {\r\n                            ry -= vm.shape.strokeWidth / 2;\r\n                        }\r\n                        vm.shape.set({rx: rx, ry: ry});\r\n\r\n                        if(vm.startPosition.x > event.e.offsetX) {\r\n                            vm.shape.set({originX: 'right'});\r\n                        } else {\r\n                            vm.shape.set({originX: 'left'});\r\n                        }\r\n                        if(vm.startPosition.y > event.e.offsetY) {\r\n                            vm.shape.set({originY: 'bottom'});\r\n                        } else {\r\n                            vm.shape.set({originY: 'top'});\r\n                        }\r\n                        vm.shape.setCoords();\r\n                        break;\r\n                    case 'triangle':\r\n                        deltaX = event.e.offsetX - vm.startPosition.x;\r\n                        deltaY = event.e.offsetY - vm.startPosition.y;\r\n                        vm.shape.setWidth(deltaX);\r\n                        vm.shape.setHeight(deltaY);\r\n                        vm.shape.setCoords();\r\n                        break;\r\n                    case 'polygon':\r\n                        var centerX = vm.shape.getCenterPoint().x;\r\n                        console.log(vm.shape.getCenterPoint());\r\n                        var radius = (event.e.offsetX - vm.startPosition.x) / 2;\r\n                        var points = starPolygonPoints(vm.shape.get('points').length / 2, radius, radius / 2);\r\n                        var boundingBox = vm.shape.getBoundingBox();\r\n                        vm.shape.set({points: points, width: boundingBox.width, height: boundingBox.height});\r\n                        vm.shape.setCoords();\r\n                        break;\r\n                }\r\n                vm.canvas.renderAll();\r\n            });\r\n            vm.canvas.on('mouse:up', function(event) {\r\n                vm.isDown = false;\r\n\r\n                if(vm.drawingMode) {\r\n                    if(vm.shapeType === 'rect') {\r\n                        if(event.e.offsetY - vm.startPosition.y < 0) {\r\n                            console.log('change spinner');\r\n                            vm.shape.top = event.e.offsetY;\r\n                            vm.shape.setHeight(vm.shape.getHeight() * -1);\r\n                            vm.shape.setCoords();\r\n                        }\r\n                    } else if(vm.shapeType === 'triangle') {\r\n                        if(vm.offsetY - vm.startPosition.y < 0) {\r\n                            vm.shape.top = event.e.offsetY;\r\n                            vm.shape.setHeight(vm.shape.getHeight() * -1);\r\n                            vm.shape.rotate(180);\r\n                            vm.shape.setCoords();\r\n                        }\r\n                    }\r\n                    vm.canvas.setActiveObject(vm.shape);\r\n                } \r\n            });\r\n            vm.canvas.on('object:selected', function() {\r\n                vm.drawingMode = false;\r\n                var shape = vm.canvas.getActiveObject();\r\n                vm.shapeType = shape.type;\r\n                console.log(vm.shapeType);\r\n            });\r\n            vm.canvas.on('selection:cleared', function() {\r\n                vm.drawingMode = true;\r\n            });\r\n    \r\n            vm.canvas.observe('object:modified', function(e) {\r\n                e.target.resizeToScale();\r\n            });\r\n            vm.openModal = function() {\r\n                console.log('modal opened');\r\n                $('.shareModal').css('display','block');\r\n            };\r\n            vm.closeModal = function() {\r\n                $('.shareModal').css('display', 'none');\r\n            };\r\n            vm.shareDesign = function() {\r\n                meanData.shareDesign(vm.shareInfo)\r\n                    .success(function(data){\r\n                        console.log(data);\r\n                        vm.closeModal();\r\n                        alert('Project shared');\r\n                    })\r\n                    .error(function(e) {\r\n                        console.log(e);\r\n                    });\r\n            };\r\n\r\n            fabric.Object.prototype.resizeToScale = function() {\r\n                switch(this.type) {\r\n                    case 'rect':\r\n                        this.width *= this.scaleX;\r\n                        this.height *= this.scaleY;\r\n                        this.scaleX = 1;\r\n                        this.scaleY = 1; \r\n                        break;\r\n                    case 'ellipse':\r\n                        this.rx *= this.scaleX;\r\n                        this.ry *= this.scaleY;\r\n                        this.width = this.rx * 2;\r\n                        this.height = this.ry * 2;\r\n                        this.scaleX = 1;\r\n                        this.scaleY = 1;\r\n                        break;\r\n                    case 'triangle':\r\n                        this.width *= this.scaleX;\r\n                        this.height *= this.scaleY;\r\n                        this.scaleX = 1;\r\n                        this.scaleY = 1;\r\n                        break;\r\n                    case 'polyline':\r\n                    case 'polygon':\r\n                        var points = this.get('points');\r\n                        for (var i = 0; i < points.length; i++) {\r\n                            var p = points[i];\r\n                            p.x *= this.scaleX;\r\n                            p.y *= this.scaleY;\r\n                        }\r\n                        this.scaleX = 1;\r\n                        this.scaleY = 1;\r\n                        this.width = this.getBoundingBox().width;\r\n                        this.height = this.getBoundingBox().height;\r\n                        break;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        vm.init();\r\n    }\r\n})();\n(function() {\r\n    angular\r\n        .module('app')\r\n        .controller('homeCtrl', homeCtrl);\r\n    \r\n    function homeCtrl() {\r\n        console.log('home controller is running');\r\n    }\r\n})();\n(function() {\r\n    angular\r\n        .module('app')\r\n        .controller('profileCtrl', profileCtrl);\r\n    profileCtrl.$inject = ['$location', 'meanData', 'authentication'];\r\n    function profileCtrl($location, meanData, authentication) {\r\n        var vm = this;\r\n\r\n        vm.user = {};\r\n        vm.designs = {};\r\n        vm.sharedDesigns = {};\r\n        vm.currentEmail = authentication.currentUser().email;\r\n        vm.design = {\r\n            title: '',\r\n            owner: vm.currentEmail,\r\n            design: ''\r\n        };\r\n        meanData.getProfile()\r\n            .success(function(data) {\r\n                vm.user = data;\r\n                console.log(vm.user.email);\r\n                meanData.getDesigns(vm.user.email)\r\n                    .success(function(data) {\r\n                        console.log(data);\r\n                        vm.designs = data.designs;\r\n                        meanData.getSharedDesigns(vm.user.email)\r\n                            .success(function(data) {\r\n                            vm.sharedDesigns = data.sharedDesigns;\r\n                        })\r\n                        .error( function(e) {\r\n                            console.log(e);\r\n                        });\r\n                    })\r\n                    .error( function(e) {\r\n                        console.log(e);\r\n                    });\r\n            })\r\n            .error( function(e) {\r\n                console.log(e);\r\n            });\r\n        vm.openModal = function() {\r\n            console.log('modal opened');\r\n            $('.designModal').css('display','block');\r\n        };\r\n        vm.closeModal = function() {\r\n            $('.designModal').css('display', 'none');\r\n        };\r\n        vm.logOut = function() {\r\n            authentication.logout();\r\n            $location.path('/');\r\n        }\r\n        vm.submitNewDesign = function() {\r\n\r\n            meanData.createDesign(vm.design)\r\n                .error(function(e) {\r\n                    console.log(e);\r\n                })\r\n                .success(function(data){\r\n                    console.log('in controller');\r\n                    console.log(data);\r\n                    $location.path('/design/' + data.id);\r\n                });\r\n        };\r\n    }\r\n})();\n(function() {\r\n    angular\r\n        .module('app')\r\n        .controller('loginCtrl', loginCtrl);\r\n    \r\n    loginCtrl.$inject = ['$location', 'authentication'];\r\n    function loginCtrl($location, authentication) {\r\n        var vm = this;\r\n\r\n        vm.credentials = {\r\n            email: '',\r\n            password: ''\r\n        };\r\n\r\n        vm.onSubmit = function() {\r\n            authentication\r\n                .login(vm.credentials)\r\n                .error(function(err) {\r\n                    console.log(err);\r\n                })\r\n                .then(function() {\r\n                    $location.path('profile');\r\n                });\r\n        };\r\n    }\r\n})();\n(function() {\r\n    \r\n    angular\r\n        .module('app')\r\n        .controller('registerCtrl', registerCtrl);\r\n    registerCtrl.$inject = ['$location', 'authentication'];\r\n    function registerCtrl($location, authentication) {\r\n        var vm = this;\r\n\r\n        vm.credentials = {\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\"\r\n        };\r\n\r\n        vm.onSubmit = function() {\r\n            console.log('submitting registration');\r\n            authentication\r\n                .register(vm.credentials)\r\n                .error(function(err) {\r\n                    console.log(err);\r\n                })\r\n                .then(function() {\r\n                    $location.path('profile');\r\n                });\r\n        };\r\n    }\r\n})();\n(function() {\r\n    angular.module('app')\r\n        .factory('DrawingService', DrawingService);\r\n    \r\n    DrawingService.$inject = ['ShapeService'];\r\n    function DrawingService(ShapeService) {\r\n        \r\n        var drawingFactory = {};\r\n        \r\n        drawingFactory.createShape = function(options) {\r\n            var parentClass = null;\r\n            console.log(options.shapeType);\r\n            if(options.shapeType === 'rect') {\r\n                parentClass = ShapeService.createRect;\r\n            } else if(options.shapeType === 'ellipse') {\r\n                parentClass = ShapeService.createEllipse;\r\n            } else if(options.shapeType === 'triangle') {\r\n                parentClass = ShapeService.createTriangle;\r\n            }\r\n            \r\n            return new parentClass(options);\r\n        }\r\n        return drawingFactory;\r\n    };\r\n})();\n(function() {\r\n    angular.module('app')\r\n            .factory('ShapeService', ShapeService);\r\n    \r\n    function ShapeService() {\r\n        \r\n        var shapeFactory = {};\r\n        \r\n        shapeFactory.createRect = function(options) {\r\n            var rect = new fabric.Rect({\r\n                left: options.startPosition.x,\r\n                top: options.startPosition.y,\r\n                width:0,\r\n                height:0,\r\n                stroke:'black',\r\n                strokeWidth:1,\r\n                fill:'transparent'\r\n            });\r\n            return rect;\r\n        }\r\n        shapeFactory.createEllipse = function(options) {\r\n            var ellipse = new fabric.Ellipse({\r\n                left: options.startPosition.x,\r\n                top: options.startPosition.y,\r\n                originX: 'left',\r\n                originY: 'top',\r\n                rx: 0,\r\n                ry: 0,\r\n                fill: 'transparent',\r\n                stroke: 'black',\r\n                strokeWidth: 1                \r\n            });\r\n            return ellipse;\r\n        }\r\n        shapeFactory.createTriangle = function(options) {\r\n            var triangle = new fabric.Triangle({\r\n                left: options.startPosition.x,\r\n                top: options.startPosition.y,\r\n                width:0,\r\n                height:0,\r\n                fill: 'transparent',\r\n                stroke: 'black',\r\n                strokeWidth: 1            \r\n            });\r\n            return triangle;\r\n        }\r\n        \r\n        return shapeFactory;\r\n    };\r\n    \r\n    \r\n})();\n(function () {\r\n    angular\r\n        .module('app')\r\n        .service('authentication', authentication);\r\n    \r\n    authentication.$inject = ['$http', '$window'];\r\n    function authentication($http, $window) {\r\n        var saveToken = function(token) {\r\n            $window.localStorage['mean-token'] = token;\r\n        };\r\n        \r\n        var getToken = function() {\r\n            return $window.localStorage['mean-token'];\r\n        };\r\n        \r\n        logout = function() {\r\n            $window.localStorage.removeItem('mean-token');\r\n        };\r\n        \r\n        var isLoggedIn = function() {\r\n            var token = getToken();\r\n            var payload;\r\n            \r\n            if(token) {\r\n                payload = token.split('.')[1];\r\n                payload = $window.atob(payload);\r\n                payload = JSON.parse(payload);\r\n                \r\n                return payload.exp > Date.now() / 1000;\r\n            } else {\r\n                return false;\r\n            }\r\n        };\r\n        var currentUser = function() {\r\n            if(isLoggedIn()) {\r\n                var token = getToken();\r\n                var payload = token.split('.')[1];\r\n                payload = $window.atob(payload);\r\n                payload = JSON.parse(payload);\r\n                return {\r\n                    email: payload.email,\r\n                    name: payload.name\r\n                };\r\n            }\r\n        };\r\n        register = function(user) {\r\n            return $http.post('/api/register', user).success(function(data) {\r\n                saveToken(data.token);\r\n            });\r\n        };\r\n        login = function(user) {\r\n            return $http.post('/api/login', user).success(function(data) {\r\n                saveToken(data.token);\r\n            });\r\n        };\r\n        return {\r\n            saveToken: saveToken,\r\n            getToken: getToken,\r\n            logout: logout,\r\n            isLoggedIn: isLoggedIn,\r\n            currentUser: currentUser,\r\n            register: register,\r\n            login: login,\r\n            logout: logout\r\n        };\r\n    }\r\n})();\n(function() {\r\n    angular\r\n        .module('app')\r\n        .service('meanData', meanData);\r\n    \r\n    meanData.$inject = ['$http', 'authentication', '$location'];\r\n    function meanData($http, authentication, $location) {\r\n        var getProfile = function() {\r\n            console.log(authentication.getToken());\r\n            return $http.get('/api/profile', {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + authentication.getToken()\r\n                }\r\n            });\r\n        };\r\n        var getDesigns = function(email) {\r\n            console.log(email);\r\n            return $http.get('/api/designs', {params: {email: email}})\r\n                .success(function(data) {\r\n                    console.log(data);   \r\n                })\r\n                .error(function(e) {\r\n                    console.log(e);\r\n                });\r\n        };\r\n        var getSharedDesigns = function(email) {\r\n            return $http.get('api/designs/shared', {params: {email: email}})\r\n                .success(function(data) {\r\n                    console.log(data);\r\n                })\r\n                .error(function(e) {\r\n                    console.log(e);\r\n                });\r\n        };\r\n        var getDesign = function(designId) {\r\n            return $http.get('/api/design', {params: {id: designId}})\r\n                .success(function(data) {\r\n                    console.log(data);\r\n                })\r\n                .error(function(e) {\r\n                    console.log(e)\r\n                });\r\n        };\r\n        var saveDesign = function(design) {\r\n              return $http.post('/api/designs/save', design)\r\n                    .success(function(data) {\r\n                  console.log(data);\r\n              });\r\n        };\r\n        var createDesign = function(design) {\r\n            return $http.post('/api/designs/save', design)\r\n                .success(function(data) {\r\n                  console.log('in data service');\r\n                    console.log(data);\r\n                })\r\n                .error(function(e) {\r\n                    console.log(e);\r\n                });\r\n            \r\n        };\r\n        var shareDesign = function(shareInfo) {\r\n              return $http.post('api/designs/share', shareInfo)\r\n                .success(function(data) {\r\n                  console.log('in mean data');\r\n                })\r\n                .error(function(e) {\r\n                  console.log(e);\r\n                });\r\n        };\r\n        \r\n        return {\r\n            getProfile: getProfile,\r\n            getDesigns: getDesigns,\r\n            getSharedDesigns: getSharedDesigns,\r\n            saveDesign: saveDesign,\r\n            getDesign: getDesign,\r\n            createDesign: createDesign,\r\n            shareDesign: shareDesign\r\n        };\r\n    }\r\n})();\n(function() {\r\n    angular\r\n        .module('app')\r\n        .controller('navigationCtrl', navigationCtrl);\r\n    navigationCtrl.$inject = ['$location', 'authentication'];\r\n    function navigationCtrl($location, authentication) {\r\n        var vm = this;\r\n\r\n        vm.isLoggedIn = authentication.isLoggedIn();\r\n\r\n        vm.currentUser = authentication.currentUser();\r\n    }\r\n})();\n(function () {\r\n    angular\r\n        .module('app')\r\n        .directive('navigation', navigation);\r\n    \r\n    function navigation() {\r\n        return {\r\n            restrict: 'EA',\r\n            templateUrl: '/common/directives/navigation/navigation.template.html',\r\n            controller: 'navigationCtrl as navvm'\r\n        };\r\n    }\r\n})();"]}